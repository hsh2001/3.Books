# TCP, IP가 보이는 그림책
### 지은이 : ANK주식회사
### 옮긴이 : 이영란, 김성훈
### 출판사 : 성안당
### 읽은 날 : 2020.03.17

# 목차
### 0. TCP/IP 맛보기
### 1. TCP/IP 개요
### 2. 통신 서비스와 프로토콜
### 3. 애플리케이션 계층
### 4. 트랜스포트 계층
### 5. 네트워크 계층
### 6. 데이터 링크 계층과 물리 계층
### 7. 라우팅
### 8. 보안
### 9. 부록

### 0. TCP/IP 맛보기
1. TCP/IP는 1960년대 미국 국방성에 의해 개발, 지원되던 ARPANET이라는 네트워크 상에서 사용할 프로토콜로 개발되었습니다. 초기 ARPANET은 네 개의 LAN을 연결한 것으로 현재 인터넷의 원형이라고 할 수 있습니다.

2. TCP/IP라는 공통된 구조로 전 세계 네트워크를 연결한 것이 바로 인터넷입니다.

### 1. TCP/IP 개요
3. ‘데이터를 디지털 신호로 바꾼다 -> 보낼 곳에 전달한다 -> 디지털 신호를 데이터로 되돌린다’라는 작업을 효율적으로 수행하기 위해서 TCP/IP에서는 데이터를 신호로 바꾸거나, 신호를 데이터로 되돌리는 데 5단계의 절차를 거칩니다. 각 단계를 계층(layer)이라고 하며, 위에서부터 순서대로 애플리케이션 계층, 트랜스포트 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층으로 되어 있습니다.

4. TCP/IP의 특징 중 하나는 ‘데이터를 일정한 크기로 분할해서 보낸다’는 것입니다. 작게 나눠진 데이터 하나 하나를 패킷(packet)이라고 하며, 이런 통신 방법을 ‘패킷 통신’이라고 합니다.(1packet ~= 1024bit)

5. 패킷 통신에서는 데이터를 세분화함으로써 하나의 회선을 사용하여 여러 데이터를 거의 동시에 송수신할 수 있습니다. 또 통신 중에 데이터의 일부가 손상되어도 해당하는 부분만 다시 보내면 된다는 장점도 있습니다.

6. 데이터를 주고받으려면 송신측과 수신측의 컴퓨터가 미리 정해놓은 공통된 매뉴얼에 따라 연락을 취해야 합니다. 이 매뉴얼을 프로토콜(protocol)이라고 합니다.

7. 만일 전 세계적으로 공통된 통신 프로토콜이 있다면, 그 프로토콜만 사용하면 어떤 컴퓨터끼리든 데이터를 주고받을 수 있게 될 것입니다. 현재 전 세계 공통 통신 프로토콜로 채택된 것이 TCP/IP입니다.

8. 송신측의 각 계층에서는 수신측의 동일한 계층에서 필요한 정보를 공통된 서식으로 데이터에 추가해 갑니다. 데이터보다 앞에 추가한 정보를 헤더(header), 뒤에 추가한 정보를 트레일러(trailer)라고 합니다.

9. 헤더와 계층화의 관계  
송신측의 각 계층에서 추가된 헤더와 트레일러는 수신측의 동일한 계층에서만 사용됩니다. 이 때문에 서로 동일한 계층끼리만 연락을 취하고 있는 것처럼 보입니다.

### 2. 통신 서비스와 프로토콜
10. ‘com’이나 ‘org’ 등 나라에 관계없이 사용할 수 있는 조직 속성을 gTLD(일반 최상위 도메인)라고 합니다. gTLD를 사용하는 경우 국가 코드는 필요없습니다. 한편 국내에서만 사용 가능한 조직 속성(‘co’ 등)을 ccTLD라고 합니다.

11. SMTP를 사용하여 메일 전송을 담당하는 프로그램을 SMTP 서버, POP를 사용하여 클라이언트에게 메일 제공을 담당하는 프로그램을 POP 서버라고 합니다. 일반적으로 한 대의 컴퓨터가 SMTP 서버와 POP 서버를 겸임하고 있습니다.

12. FTP에서는 데이터가 평문으로 전송되므로 보안에 문제가 있습니다. 현재는 데이터를 암호화해서 전송하는 FTPS(File Transfer Protocol over SSL/TLS)나 SFTP(SSH File Transfer Protocol)를 권장합니다.

13. 파일 공유의 개요  
파일 공유는 클라이언트가 수행항 조작을 서버로 실시간으로 보냄으로써 이루어집니다. 이 서비스에서 주로 사용되는 프로토콜은 Windows의 경우는 SMB(Server Message Block)나 CIFS(Common Internet File System), UNIX의 경우는 NFS(Network File System)입니다.

14. 클라이언트가 서버에 서비스를 요청할 때 구체적인 데이터를 주고받지 않고 연락만 취할 때는 데이터 부분이 비어 있는 상태로 (헤더만) 보냅니다.

### 3. 애플리케이션 계층
15. 쿠키는 HTTP 프로토콜의 정규 장치가 아닙니다. 쿠키는 보통은 CGI(Common Gateway Interface) 등 클라이언트로부터 요청에 맞게 웹 페이지를 작성하는 장치와 함께 사용합니다.

16. SSL(Secure Sockets Layer)과 TLS(Transport Layer Security)  
SSL은 인터넷 상에서 데이터 통신을 암호화하는 프로토콜입니다. SSL을 바탕으로 표준화한 것이 TLS입니다. SSL이라는 이름이 널리 보급되어 있어, SSL/TLS라고 병기하는 경우도 많습니다.

17. MTA/MUA  
전자메일 서비스에서는 메일 서버에 해당하는 프로그램을 MTA(Mail Transfer Agent), 메일 클라이언트에 해당하는 프로그램을 MUA(Mail User Agent)라고 합니다.

18. 인코딩과 디코딩  
일반적으로 사람이 이해하는 언어를 컴퓨터가 이해하는 언어(문자 코드)로 변환하는 것을 인코딩(encoding), 컴퓨터가 이해하는 언어를 다시 사람이 이해하는 언어로 바꾸는 것을 디코딩(decoding)이라고 합니다.

### 4. 트랜스포트 계층
19. 애플리케이션 계층에는 서비스의 수만큼 프로토콜이 존재합니다. 그 중에서 목적한 프로토콜을 지정하기 위해서 포트(port)라는 장치를 사용합니다. 포트란 애플리케이션 계층에 설치된 출입구를 말하는 것으로, 각각을 개별 프로토콜로 가는 현관문이라고 생각하면 됩니다. 포트에는 포트 번호라는 고유의 숫자가 할당되어 있으므로, 이것을 사용하여 ‘어떤 프로토콜에게 전달할지’를 지정하는 것입니다.

20. 트랜스포트 계층에는 TCP(Transmission Control Protocol)와 UDP(User Datagram Protocol)라는 두 개의 프로토콜이 있습니다. TCP는 신뢰성을, UDP는 속도를 중시한 프로토콜입니다.

21. 포트 번호  
포트 번호는 0~65535번까지 있습니다. 그 중에서 0~1023번까지는 통신 서비스마다 미리 예약되어 있으며, 웰노운 포트 번호(well-known port number)라고 합니다.

22. (TCP의 경우) 일정 시간을 기다려도 확인 응답이 없을 때는 이유를 불문하고 송신측은 세그먼트를 재전송합니다.

23. UDP가 하는 일은 다음 두 가지 뿐입니다. 그밖의 장치가 필요한 경우는 애플리케이션 계층의 프로토콜에서 처리합니다.
- 데이터가 깨지지 않았는지 확인하고, 깨졌다면 파기한다.
- UDP 헤더를 제거하고 지정된 애플리케이션 프로토콜에게 전달한다.

24.
- 세그먼트는 애플리케이션 계층에서 전달된 데이터에 TCP헤더를 붙인 것을 말합니다.
- 데이터그램은 네트워크 계층에서 사용되는 데이터 단위로 트랜스포트 계층에서 전달된 데이터에 IP 헤더를 붙인 것입니다.
- 프레임은 데이터 링크 계층에서 데이터에 헤더를 붙인 것을 말합니다.
- 패킷은 통신에서 사용되기 위해 작게 나눠진 데이터 하나하나를 말합니다.
 
### 5. 네트워크 계층
25. 네트워크 계층은 다른 계층과 달리 주된 프로토콜이 IP 하나밖에 없습니다.

26. 송신측에서는 트랜스포트 계층으로부터 데이터를 받아서 목적지를 특정하는 번호(IP주소) 등을 기록한 IP 헤더를 붙여서 데이터 링크측에 전달합니다. 데이터에 IP 헤더를 붙인 것을 IP 데이터그램(datagram)이라고 합니다.

27. IP 주소만으로는 네트워크부와 호스트부의 경계를 알 수 없습니다. 그래서 서브넷 마스크(또는 넷마스크)라는 값을 사용하여 경계를 나타냅니다.

28. IPv6는 생략해서 짧게 표기할 수도 있습니다. 생략 규칙은 생략..

29. 통신 세계에서는 컴퓨터 사이의 거리를 통과한 라우터의 개수로 나타냅니다. 이때 사용하는 단위를 홉(hop)이라고 합니다.

30. IP를 보조하는 ICMP  
네트워크 계층에서는 신뢰성 면에서 IP를 도와주는 프로토콜인 ICMP(Internet Control Message Protocol IPv6에서는 ICMPv6, Internet Control Message protocol for IPv6)가 있습니다. ICMP, ICMPv6는 IP 데이터그램의 통신 상태 등을 필요에 맞게 송신측에 알려줍니다.

31. IP는 UDP와 똑같이 비커넷션형 통신을 수행합니다. 그래서 데이터가 상대에게 전달됐는지 아닌지는 전혀 관여하지 않습니다.

32. 필요할 때만 자동으로 IP 주소를 할당하는 프로토콜 DHCP(Dynamic Host Configur ation Protocol)를 사용하는 방법도 있습니다. 그러면 네트워크에 접속함과 동시에 필요한 설정이 자동으로 수행됩니다.

33. 사설 주소  
회사 내나 가정 내 등 한정된 네트워크 안에서만 유효한 IP 주소를 사설 주소(private address)라고 합니다. IP 주소(공인 주소)는 중복할 수 없는데 비해, 사설 주소는 네트워크가 다르면 중복되어도 문제가 없습니다.

34. NAT(Network Address Translation)  
사설 주소와 공인 주소(global address)를 일대일로 대응시켜 변환하는 장치입니다. 확보하고 있는 공인 주소의 개수 이내라면 여러 개의 컴퓨터를 동시에 인터넷에 접속시킬 수 있습니다.

35. NAPT(Network Address Port Translation)  
하나의 공인 주소를 사용하여 여러 대의 컴퓨터를 동시에 접속할 수 있는 장치입니다. 포트 번호에 의해 각각의 컴퓨터를 식별하므로 같은 공인 주소를 동시에 사용할 수 있습니다.

### 6. 데이터 링크 계층과 물리 계층
36. 데이터 링크 계층에서는 데이터에 헤더를 붙인 것을 프레임(frame)이라고 합니다.

37. 금속선 케이블(주로 구리선)  
- 전압의 변화로 신호를 전달합니다.
- 파형이 일그러지기 쉬우므로 장거리 전송에는 신호를 증폭 및 수정하는 장치(리피터, repeater)가 필요합니다.

38. 광섬유 케이블(유리)  
- 빛의 점멸로 신호를 전달합니다.
- 원거리 전송이 가능하며, 주변 전파의 영향을 받지 않습니다.

39. 컴퓨터에서 네트워크로 가는 현관문이 되는 것이 네트워크 인터페이스 카드(NIC)라는 기기입니다.

40. MAC 주소  
NIC에는 MAC(Media Access Control) 주소라는 고유한 번호가 할당되어 있으며, 데이터 링크 계층에서는 이 번호를 사용하여 기기를 정합니다. 네트워크를 지나갈 때는 IP 주소가, 데이터 링크 계층 안으로 들어간 후에는 MAC 주소가 사용되는 것입니다. MAC 주소는 48자리 피트열을 8비트씩 ‘:(콜론)’ 또는 ‘-(하이픈)’으로 구분해서 16진수로 나타냅니다.

41. 데이터 링크 내에서는 MAC 주소를 사용하여 기기를 특정하기 때문에, IP 주소만으로는 수신인에게 전달할 수가 없습니다. IP 주소를 가지고 상대의 MAC 주소를 조사할 때는 ARP(Address Resolution Protocol) 프로토콜을 사용합니다.

42. PPP(Point-to-Point Protocol)  
PPP는 두 지점 간에 일대일 통신을 수행하는 프로토콜입니다.

43. PPPoE(PPP over Ethernet)  
이더넷 상에 있는 두 대의 컴퓨터 간에 인증을 수행할 수 있도록 한 것이 PPPoE입니다. PPPoE는 주로 xDSL이나 CATV회선, 광회선을 사용하여 액세스 서버를 경유하여 인터넷에 접속할 때 사용합니다.

44. 허브(hub)  
네트워크 상에서 케이블을 분기하기 위한 기기를 허브(hub)라고 합니다. 하나의 신호를 여러 개의 케이블로 보내기 위해 신호를 증폭할 필요가 있다는 점에서 리피터의 역할도 갖고 있습니다.

### 7. 라우팅
45. 정적 라우팅  
미리 관리자에 의해 등록된 라우팅 테이블을 사용하여 목적지까지 전달하는 방법입니다. 경로가 고정되어 있으므로, 그 경로 중 한 군데라도 상태가 잘못된 곳이 있으면 전달할 수 없습니다.

46. 동적 라우팅에서 라우터는 직접 연결되어 있는 다른 라우터로부터 정보를 얻어서 라우팅 테이블을 작성합니다. 이 때 사용되는 것이 라우팅 프로토콜입니다.

47. 동라우팅 프로토콜에는 크게 나눠서 IGP(Interior Gateway Protocol)와 EGP(Exterior Gateway Protocol) 두 종류가 있습니다.

48. RIP(Routing information Protocol)  
IGP의 일종으로 중소 규모의 조직 내에서 사용합니다. 목적지까지의 라우터 수(홉 수)를 중시해 라우팅 테이블을 작성합니다.
49. OSPF(Open Shortest Path First)  
IGP의 일종으로 중대 규모의 조직 내에서 사용됩니다. 전송 속도 등을 고려하고 목적지까지 속도를 중시해 라우팅 테이블을 작성합니다.

50. BGP(Border Gateway Protocol)  
EGP의 일종입니다. 목적지까지의 라우터 수(홉 수)를 중시해 라우팅 테이블을 작성합니다.

51. IP 주소는 ‘최종 목적지’를, MAC 주소는 ‘경유지’를 나타냅니다.

### 8. 보안
52. 네트워크 보안의 위협 중에 ‘도청’이 있습니다. 이것은 통신 중인 패킷을 도둑맞는 것인데, 이 때 패킷을 훔치기 위해 부정한 프로토콜을 장치하는 곳으로 주로 겨냥되는 것이 라우터입니다. 즉, 경유하는 라우터의 수가 많으면 많을수록 그만큼 도청될 가능성도 증가하는 것입니다. 그래서 보안을 중시한다는 이유로 ‘홉 수’가 가장 적은 경로를 선택하는 것을 고려해 볼 수 있습니다. 또 크기가 큰 데이터를 보내는 일이 많은 경우에는 ‘전송 속도’나 ‘회선의 종류’를 경로 선택의 근거로 하는 것도 효과적입니다. 어떤 이유로 ‘최적’이라고 간주하는지가 바로 라우팅 알고리즘인 것입니다.

53. 보내 오는 패킷을 무조건 받아들이면 컴퓨터의 안전은 보장할 수 없습니다. 그래서 패킷을 제어하는 기능을 갖고 있는 소프트웨어나 하드웨어를 사용합니다. 이것을 총칭해서 방화벽(firewall)이라고 합니다.

54. 프록시 서버(proxy server)  
클라이언트를 대신하여 인터넷에 접속하고, 요청에 맞는 통신 서비스를 받아서 그 결과를 클라이언트에게 제공하는 서버를 프록시 서버(proxy server)라고 합니다.

55. HTTP나 SMTP, POP 등 프로토콜마다 해당 프록시 서버가 있습니다. 하지만 일반적으로 프록시 서버라고 하면 WWW 서비스를 대행하는 HTTP 프록시 서버를 가리킵니다.

56. 프록시 서버는 모든 사용자가 열람한 웹 사이트의 정보를 일시적으로 보관(캐시)합니다. 프록시 서버 내에 보관중인 웹사이트가 요청되면 외부 서버와의 주고받기를 하지 않고 보관된 웹 페이지를 클라이언트에게 반환합니다.

### 9. 부록
57. 게이트웨이  
규격이 다른 네트워크 간을 연결하는 역할을 하는 기기나 소프트웨어를 게이트웨이라고 합니다. 모든 계층에 따른 차이를 흡수하는 기기를 갖고 있으며, 예를 들어 휴대 전화를 인터넷에 접속할 때 등 전혀 다른 기기를 연결할 때 이용됩니다. 게이트웨이(gateway)에는 출입구라는 의미가 있으며, 라우터나 프록시 서버를 이렇게 부르기도 합니다.

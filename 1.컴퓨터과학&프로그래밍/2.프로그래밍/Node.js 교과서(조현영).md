# Node.js 교과서
### 지은이 : 조현영
### 출판사 : 길벗
### 읽은 날 : 2020.03.10

# 목차
### 1장. 노드 시작하기
1.1 핵심 개념 이해하기  
1.2 서버로서의 노드  
1.3 서버 외의 노드  
1.4 개발 환경 설정하기  

### 2장. 알아두어야 할 자바스크립트
2.1 ES2015+  
2.2 프런트엔드 자바스크립트  

### 3장. 노드 기능 알아보기
3.1 REPL 사용하기  
3.2 JS 파일 실행하기  
3.3 모듈로 만들기  
3.4 노드 내장 객체 알아보기  
3.5 노드 내장 모듈 사용하기  
3.6 파일 시스템 접근하기  
3.7 이벤트 이해하기  
3.8 예외 처리하기  

### 4장. http 모듈로 웹 서버 만들기
4.1 요청과 응답 이해하기  
4.2 쿠키와 세션 이해하기  
4.3 REST API와 라우팅  
4.4 http와 http2  
4.5 cluster  

### 5장. 패키지 매니저
5.1 npm 알아보기  
5.2 package.json으로 패키지 관리하기  
5.3 패키지 버전 이해하기  
5.4 기타 npm 명령어  
5.5 패키지 배포하기  

### 6장. 익스프레스 웹 서버 만들기
6.1 Express-generator로 빠르게 설치하기  
6.2 익스프레스 구조 이해하기  
6.3 미들웨어  
6.4 Router 객체로 라우팅 분리하기  
6.5 템플릿 엔진 사용하기  

### 7장. MySQL
7.1 데이터베이스란?  
7.2 MySQL 설치하기  
7.3 워크벤치 설치하기  
7.4 데이터베이스 및 테이블 생성하기  
7.5 CRUD 작업하기  
7.6 시퀄라이즈 사용하기  

### 8장. 몽고디비
8.1 NoSQL vs SQL  
8.2 몽고디비 설치하기  
8.3 컴퍼스 설치하기  
8.4 데이터베이스 및 컬렉션 생성하기  
8.5 CRUD 작업하기  
8.6 몽구스 사용하기  

### 9장. 익스프레스로 SNS 서비스 만들기
9.1 프로젝트 구조 갖추기  
9.2 데이터베이스 세팅하기  
9.3 Passport 모듈로 로그인 구현하기  
9.4 Multer 모듈로 이미지 업로드 구현하기  
9.5 프로젝트 마무리하기  

### 10장. 웹 API 서버 만들기
10.1 API 서버 이해하기  
10.2 프로젝트 구조 갖추기  
10.3 JWT 토큰으로 인증하기  
10.4 호출 서버 만들기  
10.5 SNS API 서버 만들기  
10.6 사용량 제한 구현하기  
10.7 CORS 이해하기  
10.8 프로젝트 마무리하기  

### 11장. 웹 소켓으로 실시간 데이터 전송하기
11.1 웹 소켓 이해하기  
11.2 ws 모듈로 웹 소켓 사용하기  
11.3 Socket.IO 사용하기  
11.4 실시간 GIF 채팅방 만들기  
11.5 채팅 구현하기  
11.6 프로젝트 마무리하기  

### 12장. 실시간 경매 시스템 만들기
12.1 프로젝트 구조 갖추기  
12.2 서버센트 이벤트 사용하기  
12.3 스케줄링 구현하기  
12.4 프로젝트 마무리하기  

### 13장. 구글 API로 장소 검색 서비스 만들기
13.1 프로젝트 구조 갖추기  
13.2 Google Places API 사용하기  
13.3 Google Maps API 사용하기  
13.4 위치 기반 검색 수행하기  
13.5 프로젝트 마무리하기  

### 14장. CLI 프로그램 만들기
14.1 간단한 콘솔 명령어 만들기  
14.2 Commander, Inquirer 사용하기  
14.3 프로젝트 마무리하기  

### 15장. AWS와 GCP로 배포하기
15.1 서비스 운영을 위한 패키지  
15.2 Git과 GitHub 사용하기  
15.3 AWS 시작하기  
15.4 AWS에 배포하기  
15.5 GCP 시작하기  
15.6 GCP에 배포하기  

### 16장. 서버리스 노드 개발
16.1 서버리스 이해하기  
16.2 AWS S3 사용하기  
16.3 AWS Lambda 사용하기  
16.4 Google Cloud Storage 사용하기  
16.7 Google Cloud Functions 사용하기  

### 1장. 노드 시작하기
1. Node.js는 크롬 VS 자바스크립트 엔진으로 빌드된 자바스크립트 런타임입니다. Node.js는 이벤트 기반, 논블로킹 I/O 모델을 사용해 가볍고 효율적입니다. Node.js의 패키지 생태계인 npm은 세계에서 가장 큰 오픈 소스 라이브러리 생태계이기도 합니다.

2. 노드는 자바스크립트 런타임입니다. 런타임은 특정 언어로 만든 프로그램들을 실행할 수 있는 환경을 뜻합니다.

3. 이벤트 루프랄 잘 활용하면 오래 걸리는 작업을 효율적으로 처리할 수 있습니다. 오래 걸리는 함수를 백그라운드로 보내사 다음 코드가 먼저 실행되게 하고, 그 함수가 다시 태스크 큐를 거쳐 호출 스택으로 올라오기를 기다리는 방식입니다. 이 방식이 논블로킹 방식입니다. 논블로킹이란 이전 작업이 완료될 때까지 멈추지 않고 다음 작업을 수행함을 뜻합니다.

4. 노드가 싱글 스레드, 논블로킹 모델을 사용하므로 노드 서버 또한 동일한 모델일 수밖에 없습니다. 따라서 노드 서버의 장단점은 싱글 스레드, 논블로킹 모델의 장단점과 크게 다르지 않습니다. 싱글 스레드여서 멀티 스레드 방식보다는 컴퓨터 자원을 적게 사용하는 장점이 있지만, CPU 코어를 하나밖에 사용하지 못하는 단점도 있습니다.

5. 싱글 스레드 방식의 프로그래밍은 멀티 스레드 방식보다 상대적으로 쉽습니다. 서버 프로그래밍에 익숙하지 않은 사람도 쉽게 입문할 수 있습니다. 하지만 싱글 스레드이다 보니 하나뿐인 스레드가 에러로 인해 멈추지 않도록 잘 관리해야 합니다. 에러를 제대로 처리하지 못하면 서버 전체가 멈추기 때문입니다.

6. 노드가 아무리 좋다고 하더라도 추천하지 않는 경우도 있습니다. 이미지나 비디오 처리, 대규모 데이터 처리 같이 CPU를 많이 사용하는 작업을 위한 서버로는 권장하지 않습니다. 노드보다 더 적합한 다른 언어 서버가 많습니다. 요즘은 AWS Lambda나 Google Cloud Functions 같은 서비스에서 노드로 CPU를 많이 사용하는 작업을 처리하는 것을 지원합니다.

### 2장. 알아두어야 할 자바스크립트
7. sayJS 같은 객체의 메서드에 함수를 연결할 때 더는 콜론(:)과 function을 붙이지 않아도 됩니다.

8. sayNode : sayNode처럼 속성명과 변수명이 겹치는 경우에는 한 번만 쓸 수 있게 되었습니다. 자바스크립트에서 다음과 같은 경우가 많이 나오는데, 이때 코드의 중복을 피할 수 있어 편리합니다.

9. then이나 catch에서 다시 다른 then이나 catch를 붙일 수 있습니다. 이전 then의 return 값을 다음 then의 매개변수로 넘깁니다. 프로미스를 return한 경우 프로미스가 수행된 후 다음 then이나 catch가 호출됩니다.

10. then 메서드들은 순차적으로 실행됩니다. 콜백에서 매번 따로 처리해야 했던 에러도 마지막 catch에서 한번에 처리할 수 있습니다. 하지만 모든 콜백 함수를 위와 같이 바꿀 수 있는 것은 아닙니다.

11. async/await  
프로미스가 콜백 지옥을 해결했다지만, 여전히 코드가 장황합니다. Async/await 문법은 프로미스를 사용한 코드를 한 번 더 깔끔하게 줄여줍니다.

12. 서버의 종류에 따라 다르지만, 서버가 한글 주소를 이해하지 못하는 경우가 있는데, 이럴 때 window 객체의 메서드인 encodeURIComponent 메서드를 사용합니다. 노드에서도 사용할 수 있습니다.

13. 프런트엔드에 데이터를 내려보낼 때 첫 번째로 고려해야 할 점은 보안입니다. 클라이언트를 믿지 말라는 말이 있을 정도로 프런트엔드에 민감한 데이터를 내려보내는 것은 실수입니다. 비밀번호 같은 건 절대 내려보내지 않도록 합시다.

14. 브라우저의 모듈  
2015년 자바스크립트에도 import/expoort라는 모듈 개념이 도입되었습니다. 하지만 브라우저에는 구현되지 않아서 사용할 수 없었습니다. 크롬 60 버전부터 드디어 브라우저에서도 모듈을 사용할 수 있게 되었습니다. 앞으로 점차 더 많은 브라우저가 모듈 시스템을 지원할 것으로 보입니다.

### 3장. 노드 기능 알아보기
15. global  
Global 객체는 브라우저의 window와 같은 전역 객체입니다. 전역 객체이므로 모든 파일에서 접근할 수 있습니다.

16. 노드는 웹 브라우저에서 사용되는 자바스크립트보다 더 많은 기능을 제공합니다. 운영체제 정보에도 접근할 수 있고, 클라이언트가 요청한 주소에 대한 정보도 가져올 수 있습니다. 바로 노드에서 제공하는 모듈을 사용하면 됩니다.

17. os  
웹 브라우저에 사용되는 자바스크립트는 운영체제의 정보를 가져올 수 없지만, 노드는 os 모듈에 정보가 담겨 있어 정보를 가져올 수 있습니다.

18. path  
폴더와 파일의 경로를 쉽게 조작하도록 도와주는 모듈입니다. Path 모듈이 필요한 이유 중 하나는 운영체제별로 경로 구분자가 다르기 때문입니다. 크게 Windows 타입과 POSIX 타입으로 구분됩니다. POSIX는 유닉스 기반의 운영체제들로 macOS와 리눅스가 속해 있습니다.

19. url  
인터넷 주소를 쉽게 조작하도록 도와주는 모듈입니다. url 처리에는 크게 두 가지 방식이 있습니다. 노드 버전 7에서 추가된 WHATWG(웹 표준을 정하는 단체의 이름) 방식의 url과 예전부터 노드에서 사용하던 방식의 url이 있습니다. 두 가지 방법 다 알아두면 좋습니다.

20. querystring  
WHATWG 방식의 url 대신 기존 노드의 url을 사용할 때 search 부분을 사용하기 쉽게 객체로 만드는 모듈입니다.

21. crypto  
다양한 방식의 암호화를 도와주는 모듈입니다. 몇 가지 메서드는 익혀두면 실제 서비스에도 적용할 수 있어 정말 유용합니다.

22. fs 모듈은 파일 시스템에 접근하는 모듈입니다. 즉, 파일을 생성하거나 삭제하고, 읽거나 쓸 수 있습니다. 폴더도 만들었다 지웠다 할 수 있습니다. 웹 브라우저에서 자바스크립트를 사용할 때는 파일 다운로드와 파일 시스템 접근이 금지되어 있으므로 노드의 fs 모듈이 낯설 것입니다.

23. Sync 메서드를 사용할 때는 이전 작업이 완료되어야 다음 작업을 진행할 수 있습니다. 즉, 백그라운드가 작업하는 동안 메인 스레드는 아무것도 못하고 대기하고 있어야 하는 것입니다. 메인 스레드가 일을 하지 않고 노는 시간이 생기기 때문에 비효율적입니다. 비동기 메서드는 백그라운드가 작업을 하는 와중에도 다음 작업을 처리할 수 있었습니다.

24. 파일을 읽거나 쓰는 방식에는 크게 두 가지 방식, 즉 버퍼를 이용하는 방식과 스트림을 이용하는 방식이 있습니다.

25. 버퍼링은 영상을 재생할 수 있을 때까지 데이터를 모으는 동작이고, 스트리밍은 방송인의 컴퓨터에서 시청자의 컴퓨터로 영상 데이터를 조금씩 전송하는 동작입니다.

26. 예외 처리하기  
노드에서는 예외 처리가 정말 중요합니다. 예외란 보통 처리하지 못한 에러를 가리킵니다. 이러한 예외들은 실행 중인 노드 프로세스를 멈추게 만듭니다.

27. 멀티 스레드 프로그램에서는 스레드 하나가 멈추면 그 일을 다른 스레드가 대신합니다. 하지만 노드는 스레드가 하나뿐이므로 그 하나를 소중히 보호해야 합니다. 하나뿐인 스레드가 에러로 인해 멈춘다는 것은 전체 서버가 멈춘다는 뜻과 같습니다.

### 4장. http 모듈로 웹 서버 만들기
28. 여러분이 누구인지 기억하기 위해서, 서버는 요청에 대한 응답을 할 때 쿠키라는 것을 같이 보내줍니다. 쿠키는 name=zerocho 같이 단순한 ‘키-값’의 쌍입니다. 서버로부터 쿠키가 오면 웹 브라우저는 쿠키를 저장해두었다가 요청할 때마다 쿠키를 동봉해서 보내줍니다. 서버는 요청에 들어 있는 쿠키를 읽어서 사용자가 누구인지 파악합니다.

29. General은 공통된 헤더이고, Request Headers는 요청의 헤더, Response Headers는 응답의 헤더입니다. 수많은 헤더가 있지만 Response Headers의 Set-Cookie와 Request Headers의 Cookie만 보면 됩니다. 응답의 Set-Cookie는 브라우저에게 해당 쿠키를 심으라는 명령을 내리는 것입니다. 브라우저는 쿠키를 심은 후, 다음부터 요청을 보낼 때 Request Headers에 Cookie로 쿠키를 보냅니다.

30. 쿠키를 설정할 때 만료 시간(Expires)과 HttpOnly, Path 같은 옵션을 부여했습니다. 쿠키는 설정할 때 각종 옵션들을 넣을 수 있습니다.. 옵션 간에는 세미콜론(;)으로 구분하면 됩니다.
- 쿠키명=쿠키값 : 기본적인 쿠키의 값입니다.
- Expires=날짜 : 만료 기한입니다. 이 기한이 지나면 쿠키가 제거됩니다. 기본값은 클라이언트가 종료될 때까지입니다.
- Max-age=초 : Expires와 비슷하지만 날짜 대신 초를 입력할 수 있습니다. 해당 초가 지나면 쿠키가 제거됩니다. Expires보다 우선합니다.
- Domain=도메인명 : 쿠키가 전송될 도메인을 특정할 수 있습니다. 기본값은 현재 도메인입니다.
- Path=URL : 쿠키가 전송될 URL을 특정할 수 있습니다. 기본값은 ‘/’이고 이 경우 모든 URL에서 쿠키를 전송할 수 있습니다.
- Secure : HTTPS일 경우에만 쿠키가 전송됩니다.
- HttpOnly : 설정 시 자바스크립트에서 쿠기에 접근할 수 없습ㄴ디ㅏ. 쿠키 조작을 방지하기 위해 설정하는 것이 좋습니다.

31. REST API와 라우팅  
서버에 요청을 보낼 때는 주소를 통해 요청의 내용을 표현합니다. 주소가 /index.html이면 서버의 index.html을 보내달라는 뜻이고, /about.html이면 about.html을 보내달라는 뜻입니다. 요청이 항상 html을 요구할 필요는 없습니다. 이전 절의 server5.js에서도 /login이라는 주소를 통해서 html을 요청하는 대신 세션 저장이라는 동작을 취하길 요청했습니다. 이렇게 요청이 주소를 통해 들어오므로 서버가 이해하기 쉬운 주소를 사용하는 것이 좋습니다. 여기서 REST API가 등장합니다.

32. REST API는 Representational State Transfer의 약어입니다. 네트워크 구조의 한 형식인데요. 서버의 자원을 정의하고, 자원에 대한 주소를 지정하는 방법을 가리킵니다. 주소는 의미를 명확히 전달하기 위해 명사로 구성됩니다. /user이면 사용자 정보에 관련된 자원을 요청하는 것이고, /post라면 게시글에 관련된 자원을 요청하는 것이라고 추측할 수 있습니다.

33.  
- GET : 서버의 자원을 가져오고자 할 때 사용합니다. 요청의 본문(body)에 데이터를 넣지 않습니다. 데이터를 서버로 보내야 한다면 쿼리스트링을 사용합니다.
- POST : 서버에 자원을 새로 등록하고자 할 때 사용합니다. 요청의 본문에 새로 등록하 데이터를 넣어 보냅니다.
- PUT : 서버의 자원을 요청에 들어 있는 자원으로 치환하고자 할 때 사용합니다. 요청의 본문에 치환할 데이터를 넣어 보냅니다.
- PATCH : 서버 자원의 일부만 수정하고자 할 때 사용합니다. 요청의 본문에 일부 서정할 데이터를 넣어 보냅니다.
- DELETE : 서버의 자원을 삭제하고자 할 때 사용합니다.

34. https와 http2  
https 모듈은 웹 서버에 SSL 암호화를 추가합니다. GET이나 POST 요청을 할 때 오고 가는 데이터를 암호화해서 중간에 다른 사람이 요청을 가로채더라도 내용을 확인할 수 없게 해줍니다. 요즘은 로그인이나 결제가 필요한 창에서 https 적용이 필수가 되는 추세입니다.

35. 노드의 http2 모듈은 SSL 암호화와 더불어 최신 HTTP 프로토콜인 http/2를 사용할 수 있게 해줍니다. http/2는 요청 및 응답 방식이 기존 http/1.1보다 개선되어 훨씬 효율적으로 요청을 보냅니다. http/2를 사용하면 웹의 속도도 많이 개선됩니다.

36. cluster 모듈은 싱글 스레드인 노드가 CPU 코어를 모두 사용할 수 있게 해주는 모듈입니다. 포트를 공유하는 노드 프로세스를 여러 개 둘 수도 있어 요청이 많이 들어왔을 때 병렬로 실행된 서버의 개수만큼 요청이 분산되게 할 수 있습니다. 서버에 무리가 덜 가게 되는 셈입니다.

